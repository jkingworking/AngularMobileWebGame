"use strict";var modules=["ngAnimate","ngCookies","ngRetina","ngSanitize","ngTouch","ui.router","LocalStorageModule","angularAddToHomeScreen","angular-carousel","ui.bootstrap.datetimepicker","countTo","ordinal","angularModalService","timer","salesDawg.templates","service.auth","service.user","filter.moment","filter.rewardtype","filter.conditionFormatter","directive.userAvatar","directive.avatar","directive.blurOnSubmit","directive.carRace","directive.games.questionAnswer","directive.games.setAppointment","directive.games.soldVehicle","directive.games.testDrive","directive.weekDayPicker","view.login","view.app","view.signUp","view.dashboard","view.settings","view.games","view.game","view.leaderBoard","view.modal","view.profile","view.roadToSale","view.feedback"];angular.module("mbsApp",modules).config(function($urlRouterProvider,$httpProvider){$urlRouterProvider.otherwise("/dashboard"),$httpProvider.defaults.withCredentials=!0}).run(function($rootScope,localStorageService,$state,$http,$timeout){var gameTimerTimeout;$rootScope._dev="local."===window.location.hostname.substring(0,6),$rootScope._apiUrlBase="http://api.salesdawg.com/",$rootScope._baseUrl="http://salesdawg.com/",$rootScope._timeZone="America/Chicago",$rootScope._loginAttempts=0,$rootScope._refreshTimeout=2e4,$rootScope._extendedDateFormat="MMMM Do, YYYY - h:mma z",$rootScope._dividerDateFormat="dddd - MMM D, YYYY",$rootScope._defaultAvatar={file_location:"/assets/icons/Icon-60@3x.png"},$rootScope._showMenuBtn=!0,$rootScope._showBackBtn=!1,$rootScope._animationTime=250,$rootScope.showingMenu=!1,$rootScope._gameTimerDefault=30,$rootScope._soundEffects={button:new Audio("/assets/sounds/button.wav"),click:new Audio("/assets/sounds/click.wav"),clickEarnPoints:new Audio("/assets/sounds/click_earn_points.mp3"),close:new Audio("/assets/sounds/close.wav"),correct:new Audio("/assets/sounds/correct.mp3"),earnPoints:new Audio("/assets/sounds/earn_points.mp3"),error:new Audio("/assets/sounds/error.mp3"),gameOpen:new Audio("/assets/sounds/game_open.mp3"),incorrect:new Audio("/assets/sounds/incorrect.mp3"),notify:new Audio("/assets/sounds/notify.wav"),open:new Audio("/assets/sounds/open.wav"),success:new Audio("/assets/sounds/success.mp3"),tick:new Audio("/assets/sounds/tick.wav")},$http.get("/version.json").success(function(d){$rootScope._version=d.version}),$rootScope._getBodyClass=function(){return $rootScope._bodyClass||"default"},$rootScope.$on("$stateChangeSuccess",function(ev,toState,toParams,from,fromParams){$rootScope.timerRunning=!1,window.scrollTo(0,0),$rootScope._headerBtn=!1,$rootScope.showingMenu=!1,from["abstract"]||($rootScope._previousState=from.name,$rootScope._previousStateParams=fromParams),angular.isDefined(toState.data.bodyClass)&&($rootScope._bodyClass=toState.data.bodyClass),$rootScope._stateTitle=toState.data.title||"Sales Dawg",$rootScope._showMenuBtn=!0,$rootScope._showBackBtn=!1}),$rootScope.goBack=function(){if(void 0===$rootScope._backFunct){var previousState=$rootScope._previousState||"app.dashboard",previousStateParams=$rootScope._previousStateParams;$state.go(previousState,previousStateParams)}else $rootScope._backFunct()},$rootScope.stopTimer=function(){$rootScope.timerRunning=!1,$timeout.cancel(gameTimerTimeout),gameTimerTimeout=void 0},$rootScope.timerCountDown=function(){gameTimerTimeout=$timeout(function(){$rootScope.gameTimer>0&&$rootScope.timerRunning&&($rootScope.gameTimer=$rootScope.gameTimer-1,$rootScope.gameTimer<=10&&$rootScope.gameTimer>0&&$rootScope._soundEffects.tick.play(),$rootScope.gameTimer>0?$rootScope.timerCountDown():($rootScope.stopTimer(),$rootScope.$broadcast("timerEnded")))},1e3)}}).constant("aathsLocales",{en:{iOS:"For the best experience add SalesDawg to your home screen.",close:'<i class="fa fa-close"></i>'}}),angular.module("salesDawg.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("directives/avatar/template.html",'<div class="alt-avatar" ng-style="avatarBackground"></div>'),$templateCache.put("directives/carrace/template.html",'<div class="car-race" ng-class="raceLocation">\n    <div class="banner" ui-sref="app.leaderBoard">\n        {{place|ordinal}} Place\n        <div class="banner-tails"></div>\n    </div>\n\n    <div class="car{{$index+1}}"\n         ng-repeat="racer in racers"\n         ng-class="{me: racer.user.id == user.id}"\n         ui-sref="app.profile({profileId:racer.user.id})">\n        <style>\n            .car{{$index+1}} .car-body{\n            fill:{{racer.car.color}}\n            }\n        </style>\n        <avatar src="racer.user.avatar.file_location"></avatar>\n        <div class="points">\n            {{racer.points|number}} pts\n        </div>\n        <div class="car-box" ng-include="\'assets/images/cars/\' + racer.car.type + \'.svg\'"></div>\n    </div>\n\n    <div class="background" ui-sref="app.leaderBoard">\n        <div class="layer-1" ></div>\n        <div class="layer-2" ></div>\n        <div class="layer-3" ></div>\n        <div class="layer-4" ></div>\n    </div>\n</div>'),$templateCache.put("directives/useravatar/template.html",'<div class="directive-user-avatar">\n    <div class="user-avatar" ng-style="avatarBackground"></div>\n</div>'),$templateCache.put("directives/weekdaypicker/template.html",'<div class="week-day-picker" >\n    <div class="days-container">\n        <div class="days-slider"><div class="day"\n                 ng-repeat="day in dateRange"\n                 ng-class="{\'today\': day.getDate() == today.getDate(), \'selected\': selected == day, \'weekend\': day.getDay()==0||day.getDay()==6}"\n                 ng-click="selectDate(day)">\n                <div class="day-of-month">{{day|moment:\'Do\'}}</div>\n                <div class="day-of-week">{{day|moment:\'ddd\'}}</div>\n                <div class="selected-icon">\n                    <i class="fa fa-check" ng-if="selected == day"></i>\n                </div>\n            </div></div>\n    </div>\n</div>'),$templateCache.put("views/app/template.html",'<div id="main-view" ng-class="{\'menu-showing\':showingMenu}">\n\n    <nav class="navbar"\n         ng-class="{\'show-menu\':showingMenu, \'hide-menu\':!showingMenu}">\n        <div class="container">\n            <div class="row menu-header">\n                <div class="col-xs-2">\n                    <button type="button" class="menu-btn" ng-click="toggleMenu()" ng-if="_showMenuBtn">\n                        <span class="sr-only">Toggle navigation</span>\n                        <i class="fa fa-bars"></i>\n                    </button>\n                    <button type="button" class="menu-btn" ng-click="goBack()" ng-if="_showBackBtn">\n                        <span class="sr-only">Back</span>\n                        <i class="fa fa-angle-left"></i>\n                    </button>\n                </div>\n                <div class="col-xs-8 text-center">\n                    <h4>{{_stateTitle}}</h4>\n                </div>\n                <div class="col-xs-2">\n                    <button type="button" class="right-btn" ng-if="_headerBtn" ui-sref="{{_headerBtn.state}}">\n                        <span class="sr-only">{{_headerBtn.title}}</span>\n                        <i class="{{_headerBtn.icon}}"></i>\n                    </button>\n                </div>\n            </div>\n        </div>\n    </nav>\n    <div\n            id="main-content-area"\n            ng-class="{\'show-menu\':showingMenu, \'hide-menu\':!showingMenu}">\n        <div ui-view="mainContent" id="main-content">\n        </div>\n    </div>\n    <div class="menu-page-cover" ng-click="toggleMenu()"\n         ng-class="{\'show-menu\':showingMenu, \'hide-menu\':!showingMenu}"></div>\n    <div id="slidein-navbar" ng-class="{\'show-menu\':showingMenu, \'hide-menu\':!showingMenu}">\n        <div class="menu-container">\n            <div class="menu-outer">\n                <style>\n                    .user-info-container:after {\n                        background-image : url({{user.avatar.file_location}});\n                    }\n                </style>\n                    <div class="user-info-container text-center">\n                        <div class="container">\n                            <div class="row">\n                                <div class="text-center col-sm-10">\n                                    <a ui-sref="app.profile"><user-avatar></user-avatar></a>\n                                    <h4 class="user-name" ui-sref="app.profile">\n                                        {{user.name}}\n                                    </h4>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <ul class="nav">\n                        <li ng-repeat="menuItem in mainMenu" ng-class="{active: $state.includes(menuItem.state)}">\n                            <a ui-sref="{{menuItem.state}}" ng-click="hideMenu()">\n                                <i ng-class="menuItem.icon"></i>\n                                {{menuItem.title}}\n                                <span ng-if="menuItem.badgeCount" class="badge pull-right">{{menuItem.badgeCount}}</span>\n                            </a>\n                        </li>\n                    </ul>\n\n                    <div class="menu-footer">\n                        <ul class="small">\n                            <li ng-repeat="link in secondaryMenu">\n                                <a target="_blank" href="{{link.href}}">{{link.title}}</a>\n                            </li>\n                        </ul>\n                        <p class="small text-center version">v {{_version}}</p>\n                    </div>\n\n            </div>\n        </div>\n    </div>\n\n</div>'),$templateCache.put("views/dashboard/template.html",'<div id="view-dashboard">\n    <car-race racers="racers" place="place"></car-race>\n    <div class="dashboard-summary">\n        <div class="container">\n            <div class="row slide-navigator tabs">\n                <div class="col-xs-4 text-center tab" ng-class="{active: slideIndex == 0}" ng-click="setSlide(0)">\n                    <span class="tab-text">My Points</span>\n                </div>\n                <div class="col-xs-4 text-center tab" ng-class="{active: slideIndex == 1}" ng-click="setSlide(1)">\n                    <span class="tab-text">My Rank</span>\n                </div>\n                <div class="col-xs-4 text-center tab" ng-class="{active: slideIndex == 2}" ng-click="setSlide(2)">\n                    <span class="tab-text">My Smarts</span>\n                </div>\n            </div>\n        </div>\n        <ul rn-carousel class="points-slider" rn-carousel-index="slideIndex" rn-carousel-transition="fadeAndSlide">\n            <li class="slide" ng-repeat="slide in slides">\n                <div class="points">\n                    {{slide}}\n                </div>\n            </li>\n        </ul>\n        <div class="text-center" rn-carousel-indicators ng-if="slides.length > 1" slides="slides" rn-carousel-index="slideIndex"></div>\n        <div class="earn-points-btn">\n            <div class="container">\n                <button class="btn btn-success btn-lg salesDawg-font btn-block" ng-click="earnPoints()">Earn Points!</button>\n            </div>\n        </div>\n    </div>\n\n    <div class="dashboard-newsfeed">\n        <div class="container">\n            <h3>News Feed</h3>\n        </div>\n        <table class="table table-striped">\n            <tr ng-repeat="news in newsFeed" class="news-item"  ui-sref="app.profile({profileId:news.user.id})" >\n                <td class="avatar-col">\n                    <avatar src="news.user.avatar.file_location"></avatar>\n                </td>\n                <td class="info-col">\n                    <div class="small grey float-right">{{news.created|moment:\'fromNow\'}}</div>\n                    <strong>{{news.user.name}}</strong>\n                    <p class="small primary">{{news.description || news.game.title}} <span class="warning" >{{news.item}}</span></p>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>'),$templateCache.put("views/feedback/template.html",'<div id="view-feedback">\n    <div class="feedback-header-container">\n        <i class="fa fa-paper-plane-o fly-by"></i>\n        <i class="fa fa-paper-plane-o fly-by"></i>\n        <i class="fa fa-paper-plane-o fly-by"></i>\n        <i class="fa fa-paper-plane-o fly-by"></i>\n        <div class="feedback-header-content">\n            <div class="container">\n                <div class="row">\n                    <div class="col-sm-12 text-center">\n                        <div class="message" ng-class="{\'hide-message\' : complete, \'show-message\': !complete}">\n                            <h3 >Tell us what you think</h3>\n                            <p>We love hearing from our users. If you have a suggestion or run into a problem let us know.</p>\n                        </div>\n                        <div class="message" ng-class="{\'hide-message\' : !complete, \'show-message\': complete}">\n                            <h3 >Thanks {{user.name}},</h3>\n                            <p>Your feedback is greatly appreciated. If we we need to follow up with you we\'ll be in touch soon.</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="feedback-body-container" ng-class="{\'hide-form\' : complete}">\n        <div class="container">\n            <div class="row">\n                <form ng-submit="sendFeedback()">\n                    <div class="col-sm-12">\n                        <div class="form-group">\n                            <label>Your Feedback:</label>\n                            <textarea\n                                    rows="8"\n                                class="form-control"\n                                ng-model="feedback.comment"></textarea>\n                        </div>\n                    </div>\n                    <div class="col-sm-12">\n                        <button type="submit" class="btn btn-success btn-lg btn-block">Send Feedback</button>\n                    </div>\n                </form>\n            </div>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/game/template.html",'<div id="view-game">\n\n    <div class="game-container"\n         ng-if="gameData.type === \'questionAnswer\'">\n        <game-question-answer game-data="gameData"></game-question-answer>\n    </div>\n\n    <div class="game-container"\n         ng-if="gameData.type === \'setAppointment\'">\n        <game-set-appointment game-data="gameData"></game-set-appointment>\n    </div>\n\n    <div class="game-container"\n         ng-if="gameData.type === \'testDrive\'">\n        <game-test-drive game-data="gameData"></game-test-drive>\n    </div>\n\n    <div class="game-container"\n         ng-if="gameData.type === \'soldVehicle\'">\n        <game-sold-vehicle game-data="gameData"></game-sold-vehicle>\n    </div>\n\n\n</div>'),$templateCache.put("views/games/template.html",'<div id="view-games">\n    <div class="games-header-container">\n        <i class="fa fa-calendar"></i>\n        <i class="fa fa-user"></i>\n        <i class="fa fa-dollar"></i>\n        <i class="fa fa-check-square-o"></i>\n        <i class="fa fa-line-chart"></i>\n        <div class="game-header text-center">\n            <h3>Prove how much you know.</h3>\n            <p>Play games, earn badges, and best of all you\'ll have bragging rights.</p>\n        </div>\n    </div>\n    <div class="games-list-container">\n        <table class="full-width">\n            <tr ng-repeat="game in games" class="game-btn" ng-click="playGame(game)" >\n                <td class=" text-center icon-col">\n                    <div class="game-icon-container">\n                        <i class="{{game.icon}} game-icon"></i>\n                    </div>\n                </td>\n                <td class="desc-col">\n                    <div>\n                        <div class="salesDawg-font game-title">{{game.title}}</div>\n                        <p ng-if="!game.availableAt" class="small game-description">{{game.description}}</p>\n                        <p ng-if="game.availableAt" class="small game-description">Available to play <timer end-time="game.availableAt">{{hours}}:{{minutes}}:{{seconds}}</timer></p>\n                    </div>\n                </td>\n                <td class="learn-more-col">\n                    <i class="fa fa-angle-right learn-more-icon" ng-if="game.available"></i>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>'),$templateCache.put("views/leaderboard/template.html",'<div id="view-leader-board">\n    <div class="leaderboard-user-ranking">\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-4 leaderboard-rank-col">\n                    <h3 class="">{{myRank.rank|ordinal}}</h3>\n                    <span class="small">Rank</span>\n                </div>\n                <div class="col-xs-4 leaderboard-avatar-col">\n                    <user-avatar></user-avatar>\n                </div>\n                <div class="col-xs-4 leaderboard-points-col">\n                    <h3 class="">{{myRank.points|number}}</h3>\n                    <span class="small">Points</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="leaderboard-header">\n        <div class="container">\n            <div class="row tabs">\n                <div class=" text-center col-xs-4"\n                     ng-repeat="board in boards"\n                     ng-class="{active: $index === activeBoard}"\n                     ng-click="selectBoard($index)"><span class="tab-text" >{{board.name}}</span></div>\n            </div>\n        </div>\n    </div>\n\n    <div class="leaderboard" ng-class="{\'loading\': loading}">\n        <table class="table table-striped">\n            <tr ng-repeat="leader in leaders |orderBy:\'rank\'" ui-sref="app.profile({profileId:leader.user.id})">\n                <td class="rank-col">{{leader.rank}}.</td>\n                <td class="avatar-col"><avatar src="leader.user.avatar.file_location"></avatar></td>\n                <td class="player-name-col">\n                    <div class="player-name" >{{leader.user.name}}</div>\n                </td>\n                <td class="player-points-col">\n                    <div class="player-points" >{{leader.points | number}} pts</div>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>'),$templateCache.put("views/login/template.html",'<div ng-add-to-home-screen></div>\n<div id="view-login">\n    <div class="container">\n\n        <div class="container text-center login-container">\n            <div class="icon-container">\n                <div class="icon">\n                    <img src="assets/icons/iTunesArtwork.png" alt="" class="img-circle">\n                </div>\n                <div class="row">\n                    <div class="col-xs-8 col-xs-offset-2">\n                        <h1>SalesDawg</h1>\n                        <p class="small">Powered by Dealer10x</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-container" >\n                <form ng-submit="loginUser()">\n                    <div class="alert text-center" ng-if="_loginNotification"><b>{{_loginNotification}}</b></div>\n                    <div class="alert text-center" ng-if="error"><b>{{error}}</b></div>\n                    <div class="input-group">\n                        <div class="input-group-addon"><i class="fa fa-envelope"></i></div>\n                        <input class="form-control input-lg" type="text" placeholder="Username" ng-model="login.username" >\n                    </div>\n                    <div class="slide-up" ng-class="{\'collapsed\': forgotPassword}">\n                        <div class="input-group">\n                            <div class="input-group-addon"><i class="fa fa-asterisk"></i></div>\n                            <input class="form-control input-lg" type="password" placeholder="Password" ng-model="login.password">\n                        </div>\n                    </div>\n                    <button type="submit" class="btn btn-lg col-xs-12 btn-success" ng-disabled="loading" ng-class="{\'disabled\':loading}" ><span ng-hide="loading" >{{forgotPassword?\'Reset Password\' : \'Login\'}}</span><span ng-hide="!loading" >Loading <i class="fa fa-spinner fa-pulse" ></i></span></button>\n                </form>\n            </div>\n        </div>\n\n        <div class="container">\n            <div class="">\n                <a class="btn-link" ng-click="forgotPassword = !forgotPassword">{{forgotPassword ? \'Cancel\' : \'Forgot Password\'}}</a>\n            </div>\n        </div>\n\n    </div>\n\n    <div class="container panel-footer login-footer">\n        <div class="row" ng-click="signUp()">\n            <div class="col-xs-6">Need an account?</div>\n            <div class="col-xs-6 text-right">Sign Up</div>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/modals/cant_play_yet.html",'<div id="modal-container" ng-class="{\'entering\': modalClass.entering, \'leaving\': modalClass.leaving}">\n    <div id="modal-game-complete">\n        <div class="container">\n            <h2>{{modalData.title}}</h2>\n            <div class="row">\n                <div class="col-xs-10 col-xs-offset-1">\n                    <p>{{modalData.message}}</p>\n                </div>\n            </div>\n            <h4 >{{modalData.availableAt|moment:\'calendar\'}}</h4>\n        </div>\n        <div class="modal-footer text-center ">\n            <button focus\n                    class="btn btn-lg btn-block btn-success"\n                    ng-click="close()">Ok, Got it</button>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/modals/game_complete.html",'<div id="modal-container" ng-class="{\'entering\': modalClass.entering, \'leaving\': modalClass.leaving}">\n    <div id="modal-game-complete">\n        <div class="container">\n            <h2>{{modalData.title}}</h2>\n            <div class="row">\n                <div class="col-xs-10 col-xs-offset-1">\n                    <p>{{modalData.message}}</p>\n                </div>\n            </div>\n            <h4>You earned {{modalData.reward_amount|number}}{{modalData.reward_type|rewardType:\'short\'}}</h4>\n        </div>\n        <div class="modal-footer text-center ">\n            <button focus class="btn btn-lg btn-success btn-block" ng-click="buttonAction()">{{modalData.button.text}} <i ng-if="modalData.button.icon_class" class="{{modalData.button.icon_class}}"></i></button>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/modals/question_complete.html",'<div id="modal-container" ng-class="{\'entering\': modalClass.entering, \'leaving\': modalClass.leaving}">\n    <div id="modal-game-complete">\n        <div class="container">\n            <h2>{{modalData.title}}</h2>\n            <div class="row">\n                <div class="col-xs-10 col-xs-offset-1">\n                    <p>{{modalData.message}}</p>\n                </div>\n            </div>\n            <h4 ng-if="modalData.reward_amount > 0">You earned {{modalData.reward_amount|number}}{{modalData.reward_type|rewardType:\'short\'}}</h4>\n        </div>\n        <div class="modal-footer text-center ">\n            <button\n                    focus\n                    class="btn btn-lg btn-block"\n                    ng-class="{\'btn-success\' : modalData.reward_amount > 0, \'btn-danger\': modalData.reward_amount <= 0}"\n                    ng-click="gameAction()">{{modalData.button.text}} <i ng-if="modalData.button.icon_class" class="{{modalData.button.icon_class}}"></i></button>\n        </div>\n    </div>\n</div>'),$templateCache.put("views/profile/template.html",'<div id="view-profile">\n\n    <div class="profile-header">\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12 text-center">\n                    <avatar src="profileData.user.avatar.file_location"></avatar>\n                    <h2>{{profileData.user.name}}</h2>\n                </div>\n            </div>\n\n            <div class="row">\n                <div class="col-xs-12 text-center">\n                    <div class="banner" >{{{}|moment:\'MMMM\'}} Standings\n                        <div class="banner-tails"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-4 text-center header-points-col">\n                    <h3>{{profileData.monthOverview.points|number}}</h3>\n                    <span class="small">Points</span>\n                </div>\n                <div class="col-xs-4 text-center header-group-col">\n                    <h3>{{profileData.monthOverview.rank.group.rank|ordinal}}</h3>\n                    <span class="small">Dealership</span>\n                </div>\n                <div class="col-xs-4 text-center header-overall-col">\n                    <h3>{{profileData.monthOverview.rank.all.rank|ordinal}}</h3>\n                    <span class="small">Overall</span>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="profile-body">\n        <div class="container">\n            <div class="row">\n                <div class="col-xs-12 text-center">\n                    <h3>Road to the Sale</h3>\n                    <p class="small caption">This month</p>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-4 text-center road-to-sale-dot">\n                    <div class="number-dot" >\n                        <i class="fa fa-calendar"></i>\n                        {{profileData.monthOverview.appointmentsSet|number}}\n                    </div>\n                    <h5>Appointments</h5>\n                </div>\n                <div class="col-xs-4 text-center road-to-sale-dot">\n                    <div class="number-dot" >\n                        <i class="fa fa-car"></i>\n                        {{profileData.monthOverview.testDrives|number}}\n                    </div>\n                    <h5>Test Drives</h5>\n                </div>\n                <div class="col-xs-4 text-center road-to-sale-dot">\n                    <div class="number-dot" >\n                        <i class="fa fa-money"></i>\n                        {{profileData.monthOverview.vehiclesSold|number}}\n                    </div>\n                    <h5>Vehicles Sold</h5>\n                </div>\n            </div>\n            <hr/>\n            <div class="row">\n                <div class="col-xs-12 text-center">\n                    <h3>Game Performance</h3>\n                    <p class="small caption">This month</p>\n                </div>\n            </div>\n            <div class="row" ng-repeat="game in profileData.games">\n                <div class="col-xs-12">\n                    <h4>{{game.game}}</h4>\n                </div>\n                <div class="col-xs-12" ng-if="game.questionsAnswered == 0">\n                    <div class="progress">\n                        <p class="text-center">Not yet played</p>\n                    </div>\n                    <p>&nbsp;</p>\n                </div>\n                <div class="col-xs-12" ng-if="game.questionsAnswered > 0">\n                    <div class="progress">\n                        <div class="progress-bar" role="progressbar"\n                             aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"\n                             ng-style="{\'width\':(game.correctPercent * 100) + \'%\'}"\n                             ng-class="{\n                                \'progress-bar-danger\': game.correctPercent < 0.5,\n                                \'progress-bar-warning\': game.correctPercent < 0.8,\n                                \'progress-bar-success\': game.correctPercent >= 0.8\n                                }">\n                            {{game.correctPercent * 100 | number:0}}%\n                        </div>\n                    </div>\n                    <p class="small"> {{game.answeredCorrect}} of {{game.questionsAnswered}} questions answered correctly</p>\n                </div>\n            </div>\n        </div>\n    </div>\n\n</div>'),$templateCache.put("views/roadtosale/template.html",'<div id="view-road-to-sale">\n    <div class="view-road-to-sale-header">\n        <div class="background country">\n            <div class="grass left"></div>\n            <div class="grass right"></div>\n            <div class="layer-4"></div>\n        </div>\n        <div class="street-container">\n            <div class="animated-street"></div>\n            <div class="animated-grass"></div>\n        </div>\n        <div class="header-block text-center">\n            <h3>Keep pushing down the road.</h3>\n            <p>Set more appointments, take more test drives, sell more cars.</p>\n        </div>\n    </div>\n    <div class="view-road-to-sale-list">\n        <table class="full-width">\n            <tr ng-repeat="game in games" class="game-btn" ng-click="playGame(game)" >\n                <td class=" text-center icon-col">\n                    <div class="game-icon-container">\n                        <i class="{{game.icon}} game-icon"></i>\n                    </div>\n                </td>\n                <td class="desc-col">\n                    <div>\n                        <div class="salesDawg-font game-title">{{game.title}}</div>\n                        <p class="small game-description">{{game.description}}</p>\n                    </div>\n                </td>\n                <td class="learn-more-col">\n                    <i class="fa fa-angle-right learn-more-icon"></i>\n                </td>\n            </tr>\n        </table>\n    </div>\n</div>'),$templateCache.put("views/settings/template.html",'<div id="view-settings">\n    <form ng-submit="updateProfile()" id="profileForm">\n        <div class="text-center avatar-upload-container">\n            <div class="avatar-upload-box">\n                <button\n                    ngf-select="true"\n                    ng-model="avatar"\n                    ngf-multiple="false"\n                    ngf-capture="\'camera\'"\n                    accept="image/*"\n                    ngf-accept="\'image/*\'"\n                    ngf-keep="false"\n                    ngf-keep-distinct="true"\n                    ngf-reset-on-click="true"\n                    ngf-reset-model-on-click="true"\n                    >Upload</button>\n                <div\n                    ngf-src="avatar"\n                    ngf-background="avatar"\n                    ngf-as-background="true"\n                    ngf-accept="\'.jpg,.png\'"\n                    class="img" ></div>\n                <div class="upload-complete" ng-class="{show: progressComplete}"><i class="fa fa-check"></i></div>\n                <div class="upload-progress" ng-style="progressIndicator"></div>\n            </div>\n            <p class="small">Tap avatar to change</p>\n        </div>\n\n        <div class="container form-container">\n            <div class="form-group">\n                <label for="name">Name</label>\n                <input type="text" id="name" class="form-control " placeholder="Name" ng-model="user.name" >\n            </div>\n            <div class="form-group">\n                <label for="email">Email</label>\n                <input type="email" id="email" class="form-control " placeholder="Email" ng-model="user.email" >\n            </div>\n\n            <div class="form-group">\n                <label for="timeZone">Time Zone</label>\n                <select id="timeZone" class="form-control " placeholder="Email" ng-model="user.timezone" >\n                    <option ng-repeat="timeZone in timeZones" value="{{timeZone}}" ng-selected="user.timezone == timeZone">{{timeZone}}</option>\n                </select>\n            </div>\n\n            <div class="text-center">\n                <button class="btn btn-success btn-lg full-width submit-btn" type="submit" >{{(loading)?\'Saving...\':\'Save\'}}</button>\n            </div>\n<br>\n            <br>\n            <div class="text-center">\n                <a class="btn btn-primary btn-lg full-width " type="button" ui-sref="logout" >Logout</a>\n            </div>\n        </div>\n    </form>\n\n</div>'),
$templateCache.put("views/signup/template.html",'<div id="view-signup">\n    <div class="container">\n\n        <div class="container text-center signup-container">\n            <div class="icon-container">\n                <div class="icon">\n                    <img src="assets/icons/iTunesArtwork.png" alt="" class="img-circle">\n                </div>\n                <div class="row">\n                    <div class="col-xs-8 col-xs-offset-2">\n                        <h1>SalesDawg</h1>\n                        <p class="small">Powered by Dealer10x</p>\n                    </div>\n                </div>\n            </div>\n\n            <div class="form-container" >\n                <form ng-submit="signUpUser()" novalidate>\n                    <div class="alert text-left" ng-if="errors">\n                        <div ng-repeat="error in errors"><b>{{error}}</b></div>\n                    </div>\n                    <input required class="form-control input-lg" type="text" placeholder="Full Name" ng-model="signup.name" >\n                    <input required class="form-control input-lg" type="email" placeholder="Email" ng-model="signup.email" >\n\n                    <div class="has-feedback" ng-class="{\'has-warning\':passwordMismatch}">\n                        <input required class="form-control input-lg" type="password" placeholder="Password" ng-model="signup.password" ng-blur="confirmPassword()"  >\n                        <span class="fa fa-warning form-control-feedback"></span>\n                    </div>\n\n                    <div class="has-feedback" ng-class="{\'has-warning\':passwordMismatch}">\n                        <input required class="form-control input-lg" type="password" placeholder="Confirm Password" ng-model="signup.password_confirm" ng-keyup="confirmPassword()" >\n                        <span class="fa fa-warning form-control-feedback"></span>\n                    </div>\n\n                    <select required class="form-control input-lg" ng-model="signup.group_id" ng-if="groups.length" >\n                        <option value="">{{(groups.length == 0) ? \'Loading...\' : \'- Select Dealership -\'}}</option>\n                        <option ng-repeat="group in groups | orderBy:\'title\'" value="{{group.id}}" ng-select="inviteGroup == group.id">{{group.name}} - {{group.city}}, {{group.state}}</option>\n                    </select>\n\n                    <div class="has-feedback" ng-class="{\'has-warning\':passwordMismatch}" ng-if="!groups.length">\n                        <input required class="form-control input-lg" type="text" value="Team {{group.name}}" ng-disabled="!groups.length" >\n                        <span class="fa fa-check form-control-feedback primary"></span>\n                    </div>\n\n                    <button type="submit" class="btn btn-lg col-xs-12 btn-success" ng-disabled="loading" ng-class="{\'disabled\':loading}" ><span ng-hide="loading" >Sign Up</span><span ng-hide="!loading" >Loading <i class="fa fa-spinner fa-pulse" ></i></span></button>\n                </form>\n            </div>\n        </div>\n\n        <div class="container">\n            <div class="">\n                <a class="btn-link" ui-sref="login">Cancel</a>\n            </div>\n        </div>\n\n    </div>\n\n</div>'),$templateCache.put("directives/games/questionanswer/template.html",'<div class="question-answer-container">\n    <style>\n        .game-timer:after{\n            left: -{{( $root.gameTimer > 0 ) ? ( $root.gameTimer-1 ) * 100 / $root._gameTimerDefault : 0 }}%;\n        }\n    </style>\n    <div class="game-timer">{{$root.gameTimer}}\'</div>\n\n    <div ng-repeat="activity in gameData.activities" class="question-answer">\n\n        <div class="question-block">\n            <div class="container">\n                <div class="row">\n                    <div class="col-xs-12 question-card">\n                        <div class="row ">\n                            <div class="col-xs-12">\n                                <h4 class="question text-center">{{activity.questions[$root.currentQuestion].question}}</h4>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="row">\n                    <div class="col-sm-12 text-center">\n                        Question {{$root.currentQuestion+1}} of {{activity.questions.length}}\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="answer-block">\n            <div class="container">\n                <div class="row">\n                    <div class="col-xs-12">\n                        <ul class="answer-list">\n                            <li ng-repeat="answer in activity.questions[$root.currentQuestion].answers" class="bounce-in">\n                                <button class="btn btn-success btn-block btn-lg btn-game"\n                                        ng-click="selectAnswer($parent.$index, $index, answer.value, true)">\n                                    {{answer.label}}\n                                </button>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'),$templateCache.put("directives/games/setappointment/template.html",'<div class="game-set-appointment"\n     ng-class="stateClass">\n\n    <div class="container header-container">\n        <div class="points-earned" ng-if="totalRewards.points > 0">{{totalRewards.points|number}}{{activity.reward_type|rewardType:\'short\'}}</div>\n        <div class="text-center">Step {{currentActivity+1}} of {{gameData.activities.length}}</div>\n        <div class="header-contents-container">\n            <div class="header-contents text-center animate">\n                <h4>{{activity.title}}</h4>\n                <p>{{activity.description}}</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="activity-container">\n\n        <div ng-switch="activity.activity_type" ng-class="activity.activity_type">\n\n            <div ng-switch-when="dateSelect" class="animate">\n                <week-day-picker\n                        on-set-time="onDateSet()"\n                        ng-model="formData[currentActivity]"\n                        config="{ startView:\'day\', minView:\'day\' }"\n                        ></week-day-picker>\n            </div>\n\n            <div ng-switch-when="textInput" class="text-input animate">\n                <div class="container">\n                    <input type="text"\n                           ng-model="formData[currentActivity]"\n                           placeholder="Enter {{activity.condition_name|conditionFormatter}}"\n                           clear-focus="clearFocus"\n                           class="form-control"/>\n                </div>\n            </div>\n\n            <div ng-switch-when="radio" class="animate" class="btn-group btn-group-justified" role="group">\n                <div class="btn-group" role="group" ng-repeat="radioValue in activity.condition_param.split(\',\')">\n                    <button\n                            type="button"\n                            class="btn btn-default"\n                            ng-class="{\n                                        \'btn-secondary\':formData[$parent.$index] !== radioValue,\n                                        \'btn-primary\':formData[$parent.$index] === radioValue\n                                        }"\n                            ng-click="setRadioValue($parent.$index, radioValue)">{{radioValue}}\n                    </button>\n                </div>\n            </div>\n\n            <div ng-switch-when="select" class="animate">\n                <select class="form-control" ng-model="formData[currentActivity]" ng-change="optionChanged()">\n                    <option value="">- Please Select -</option>\n                    <option value="{{selectOption}}"\n                            ng-repeat="selectOption in activity.condition_param.split(\',\')">\n                        {{selectOption}}\n                    </option>\n                </select>\n            </div>\n\n        </div>\n\n    </div>\n    <div class="container footer-container">\n        <br>\n        <button type="button"\n                class="btn btn-success btn-lg full-width"\n                ng-click="nextActivity()"\n                ng-class="{\'showButton\': showButton, \'hideButton\': !showButton}">{{(currentActivity+1 == gameData.activities.length) ? gameData.title : \'Next\'}} <i ng-if="currentActivity+1 != gameData.activities.length" class="fa fa-angle-right float-right"></i></button>\n    </div>\n</div>'),$templateCache.put("directives/games/soldvehicle/template.html",'<div class="game-sold-vehicle"\n     ng-class="stateClass">\n\n    <div class="container header-container">\n        <div class="points-earned" ng-if="totalRewards.points > 0">{{totalRewards.points|number}}{{activity.reward_type|rewardType:\'short\'}}</div>\n        <div class="text-center" ng-if="gameData.activities.length > 1">Step {{currentActivity+1}} of {{gameData.activities.length}}</div>\n        <div class="header-contents-container">\n            <div class="header-contents text-center animate">\n                <h4>{{activity.title}}</h4>\n                <p>{{activity.description}}</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="activity-container">\n\n        <div ng-switch="activity.activity_type" ng-class="activity.activity_type">\n\n            <div ng-switch-when="dateSelect" class="animate">\n                <datetimepicker\n                        data-on-set-time="onDateSet()"\n                        data-ng-model="formData[currentActivity]"\n                        data-datetimepicker-config="{ startView:\'day\', minView:\'day\' }"\n                        ></datetimepicker>\n            </div>\n\n\n            <div ng-switch-when="textInput" class="text-input animate">\n                <input type="text" ng-model="formData[currentActivity]" class="form-control">\n            </div>\n\n\n            <div ng-switch-when="radio"  class="animate radio-buttons">\n                <div class="container">\n                    <div class="row">\n                        <div class="col-xs-{{(12/splitValues.length)}}" ng-repeat="radioValue in splitValues = (activity.condition_param.split(\',\'))">\n                            <button\n                                    type="button"\n                                    class="btn btn-block btn-default"\n                                    ng-class="{\n                                            \'btn-info\': radioValue == \'Yes\',\n                                            \'btn-danger\': radioValue == \'No\',\n                                            \'active\': formData[currentActivity] === radioValue\n                                            }"\n                                    ng-click="setRadioValue($parent.currentActivity, radioValue)">\n                                <i class="fa" ng-class="{\'fa-check\': radioValue == \'Yes\', \'fa-ban\': radioValue == \'No\'}"></i>\n                                {{radioValue}}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div ng-switch-when="select" class="animate select">\n                <div class="container text-center">\n                    <i class="fa fa-sort"></i>\n                    <select class="form-control" ng-model="formData[currentActivity]" ng-change="optionChanged()">\n                        <option value="">- Please Select -</option>\n                        <option value="{{selectOption}}"\n                                ng-repeat="selectOption in activity.condition_param.split(\',\')"\n                                ng-selected="selectOption == formData[currentActivity]">\n                            {{selectOption}}\n                        </option>\n                    </select>\n                </div>\n            </div>\n\n        </div>\n\n    </div>\n        <div class="container footer-container">\n            <br>\n            <button type="button"\n                    class="btn btn-success btn-lg full-width"\n                    ng-click="nextActivity()"\n                    ng-class="{\'showButton\': showButton, \'hideButton\': !showButton}">{{(currentActivity+1 == gameData.activities.length) ? \'Done\' : \'Next\'}} <i ng-if="currentActivity+1 != gameData.activities.length" class="fa fa-angle-right float-right"></i></button>\n        </div>\n</div>'),$templateCache.put("directives/games/testdrive/template.html",'<div class="game-test-drive"\n     ng-class="stateClass">\n\n    <div class="container header-container">\n        <div class="points-earned" ng-if="totalRewards.points > 0">{{totalRewards.points|number}}{{activity.reward_type|rewardType:\'short\'}}</div>\n        <div class="text-center" ng-if="gameData.activities.length > 1">Step {{currentActivity+1}} of {{gameData.activities.length}}</div>\n        <div class="header-contents-container">\n            <div class="header-contents text-center animate">\n                <h4>{{activity.title}}</h4>\n                <p>{{activity.description}}</p>\n            </div>\n        </div>\n    </div>\n\n    <div class="activity-container">\n\n        <div ng-switch="activity.activity_type" ng-class="activity.activity_type">\n\n            <div ng-switch-when="dateSelect" class="animate">\n                <datetimepicker\n                        data-on-set-time="onDateSet()"\n                        data-ng-model="formData[currentActivity]"\n                        data-datetimepicker-config="{ startView:\'day\', minView:\'day\' }"\n                        ></datetimepicker>\n            </div>\n\n\n            <div ng-switch-when="textInput"  class="text-input animate">\n                <div class="container full-height">\n                    <input type="text"\n                           ng-model="formData[currentActivity]"\n                           placeholder="Enter {{activity.condition_name|conditionFormatter}}"\n                           class="form-control">\n                    <div ng-if="customers.length > 0"\n                         class="customers-container" >\n                        <div class="title" ng-if="filteredCustomers.length">Today\'s Appointments</div>\n                        <div class="customers-list">\n                            <div ng-repeat="customer in filteredCustomers = (customers|filter:formData[currentActivity])"\n                                 class="customer"\n                                 ng-class="{\'clicked\': formData[currentActivity] === customer}"\n                                 ng-click="chooseCustomer(customer)" >{{customer}}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n\n            <div ng-switch-when="radio" class="btn-group btn-group-justified" role="group"  class="animate">\n                <div class="btn-group" role="group" ng-repeat="radioValue in activity.condition_param.split(\',\')">\n                    <button\n                            type="button"\n                            class="btn btn-default"\n                            ng-class="{\n                                    \'btn-secondary\':formData[currentActivity] !== radioValue,\n                                    \'btn-primary\':formData[currentActivity] === radioValue\n                                    }"\n                            ng-click="setRadioValue($parent.$index, radioValue)">{{radioValue}}\n                    </button>\n                </div>\n            </div>\n\n            <div ng-switch-when="select"  class="animate">\n                <select class="form-control" ng-model="formData[currentActivity]" ng-change="optionChanged()">\n                    <option value="">- Please Select -</option>\n                    <option value="{{selectOption}}"\n                            ng-repeat="selectOption in activity.condition_param.split(\',\')">\n                        {{selectOption}}\n                    </option>\n                </select>\n            </div>\n\n        </div>\n\n    </div>\n    <div class="container footer-container">\n        <br>\n        <button type="button"\n                class="btn btn-success btn-lg full-width"\n                ng-click="nextActivity()"\n                ng-class="{\'showButton\': showButton, \'hideButton\': !showButton}">{{(currentActivity+1 == gameData.activities.length) ? \'Done\' : \'Next\'}} <i ng-if="currentActivity+1 != gameData.activities.length" class="fa fa-angle-right float-right"></i></button>\n    </div>\n</div>')}]),angular.module("directive.avatar",[]).directive("avatar",function(){return{restrict:"E",replace:!0,templateUrl:"directives/avatar/template.html",controller:function($scope,$rootScope){$scope.avatarBackground={"background-image":"url("+$scope.avatarUrl+")"}},scope:{avatarUrl:"=src"}}}),angular.module("directive.blurOnSubmit",[]).directive("blurOnSubmit",function(){return function(scope,element,attr){var textFields=$(element).children("input");$(element).submit(function(){textFields.blur()})}}).directive("clearFocus",function(){return{restrict:"A",scope:{clearFocus:"="},link:function($scope,$element){$scope.$watch("clearFocus",function(currentValue){currentValue&&$element[0].blur()})}}}),angular.module("directive.carRace",[]).directive("carRace",function(){return{restrict:"E",replace:!0,templateUrl:"directives/carrace/template.html",controller:"carRaceController",scope:{racers:"=",place:"="}}}).controller("carRaceController",function($scope,$rootScope){function getRandomArbitrary(min,max){return Math.round(Math.random()*(max-min)+min)}$scope.user=$rootScope.user;var raceLocations=["city","country","ocean"],locId=getRandomArbitrary(0,2);$scope.raceLocation=raceLocations[locId]}),angular.module("directive.userAvatar",["service.user"]).directive("userAvatar",function(){return{restrict:"EA",replace:!0,templateUrl:"directives/useravatar/template.html",controller:"userAvatarController"}}).controller("userAvatarController",function($rootScope){function loadAvatar(){var avatar=$rootScope.user.avatar.file_location||$rootScope._defaultAvatar.file_location;$rootScope.avatarBackground={"background-image":"url("+avatar+")"}}loadAvatar()}),angular.module("directive.weekDayPicker",[]).directive("weekDayPicker",function(){return{restrict:"EA",replace:!0,templateUrl:"directives/weekdaypicker/template.html",controller:"weekDayPickerController",scope:{onSetTime:"=",config:"=",ngModel:"="}}}).controller("weekDayPickerController",function($scope,$rootScope,$http,ModalService){function getFirstDay(d){d=new Date(d);var day=d.getDay(),diff=d.getDate()-day;return new Date(d.setDate(diff))}function getLastDay(d){d=new Date(d);var diff=d.getDate()+13;return new Date(d.setDate(diff))}$scope.dateRange=[],$scope.today=new Date,$scope.ngModel=$scope.selected;for(var firstDay=getFirstDay($scope.today),lastDay=getLastDay(firstDay),i=new Date(firstDay);lastDay>=i;i.setDate(i.getDate()+1))$scope.dateRange.push(new Date(i.setDate(i.getDate())));$scope.selectDate=function(day){$scope.ngModel=$scope.selected=day}}),angular.module("filter.conditionFormatter",[]).filter("conditionFormatter",function(){return function(input,param){var string=input.split(/(?=[A-Z])/).join(" ");return string.substring(0,1).toUpperCase()+string.substring(1)}}),angular.module("filter.moment",[]).filter("moment",function($rootScope){return function(input,param){return"fromNow"===param?moment.utc(input).tz($rootScope.user.timezone).fromNow():"calendar"===param?moment.utc(input).tz($rootScope.user.timezone).calendar():moment.utc(input).tz($rootScope.user.timezone).format(param)}}),angular.module("filter.rewardtype",[]).filter("rewardType",function(){return function(input,param){var rewards={points:{name:"Points","short":"pts"},experience:{name:"Experience","short":"exp"},badge:{name:"Badge","short":"bdg"}};return rewards[input][param]?rewards[input][param]:rewards[input]?rewards[input].name:input}}),angular.module("service.auth",[]).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(function($q,$rootScope,$location,localStorageService){return{request:function(request){var token=localStorageService.get("token");return token&&"http"===request.url.substr(0,4)&&(request.headers["x-auth-key"]=token),request},response:function(resp){return resp},responseError:function(resp,status,headers,config){return 401===resp.status&&"/login"!==$location.path()&&$location.path("/login"),$q.reject(resp)}}})}]).service("authService",function($q,$rootScope,$http,localStorageService,userService){return{login:function(username,password){return $http.post($rootScope._apiUrlBase+"v1/login",{username:username,password:password}).then(function(data){localStorageService.set("token",data.data.token),$rootScope._loginAttempts=0,userService.userInfo().then(function(data){$rootScope.user=data})})},logout:function(){return $q(function(resolve){return localStorageService.remove("token"),localStorageService.remove("login"),userService.clear(),resolve()})},forgotPassword:function(username){return $http.post($rootScope._apiUrlBase+"v1/forgot_password",{username:username}).then(function(){$rootScope._loginAttempts=0})}}}),angular.module("service.user",[]).service("userService",function($q,$rootScope,$http,localStorageService){return{getUserInfo:function(){return $http.get($rootScope._apiUrlBase+"v1/user/whoami").then(function(data){return $rootScope.$broadcast("userUpdated"),data.data.avatar||(data.data.avatar={file_location:$rootScope._defaultAvatar.file_location}),data},function(data){return data})},userInfo:function(force){var userService=this,storedUserInfo=localStorageService.get("userInfo");return storedUserInfo&&!force?$q(function(resolve){return resolve(storedUserInfo)}):userService.getUserInfo().then(function(data){return localStorageService.set("userInfo",data.data.user),$q(function(resolve){return resolve(data.data.user)})})},save:function(){return $http.put($rootScope._apiUrlBase+"v1/user",$rootScope.user).then(function(data){return localStorageService.set("userInfo",data.data.user),data.data.user},function(data){return data.data})},clear:function(){localStorageService.remove("userInfo")}}}),angular.module("view.app",[]).config(function($stateProvider){$stateProvider.state("app",{"abstract":!0,templateUrl:"views/app/template.html",controller:"appController",resolve:{userData:function($rootScope,userService){return userService.userInfo(!0).then(function(userData){$rootScope.user=userData})}}})}).controller("appController",function($rootScope,$state,$scope,authService){$scope.$state=$state,$scope.mainMenu=[{title:"Dashboard",state:"app.dashboard",icon:"fa fa-tachometer",badgeCount:!1},{title:"Leader Board",state:"app.leaderBoard",icon:"fa fa-trophy",badgeCount:!1},{title:"Road to Sale",state:"app.roadToSale",icon:"fa fa-road",badgeCount:!1},{title:"Games",state:"app.games",icon:"fa fa-plus-square",badgeCount:!1},{title:"Feedback",state:"app.feedback",icon:"fa fa-question-circle",badgeCount:!1}],$scope.secondaryMenu=[{title:"Terms & Conditions",href:$rootScope._baseUrl+"terms.php"},{title:"Privacy",href:$rootScope._baseUrl+"privacy.php"}],$scope.toggleMenu=function(){$rootScope.showingMenu=!$rootScope.showingMenu},$scope.hideMenu=function(){$rootScope.showingMenu=!1},$scope.showMenu=function(){$rootScope.showingMenu=!0},$scope.$watch("showingMenu",function(nv,ov){nv!==ov&&(nv?$rootScope._soundEffects.open.play():$rootScope._soundEffects.close.play())}),$rootScope.$on("401",function(){$rootScope._attemptingAutoLogin||($rootScope._loading=!0,authService.autoLogin().then(function(){$rootScope._loading=!1,$rootScope._401Count<10?$state.reload():$state.go("login")},function(){$rootScope._loading=!1,$state.go("login")}))})}),angular.module("view.dashboard",["view.app"]).config(function($stateProvider){$stateProvider.state("app.dashboard",{url:"/dashboard",views:{mainContent:{templateUrl:"views/dashboard/template.html",controller:"dashboardController"}},data:{bodyClass:"dashboard-state"}})}).controller("dashboardController",function($scope,$state,$http,$timeout,$rootScope,$filter,localStorageService){function setDashboardData(data){var dashboardData=data;$scope.place=dashboardData.rank.group,$scope.racers=dashboardData.leaderboardRacers,$scope.slides=[$filter("number")(dashboardData.points.monthlyPoints)+" pts",$filter("ordinal")(dashboardData.rank.group),$filter("number")(100*dashboardData.gamesSummary.percentCorrect,0)+"% correct"],angular.equals($scope.newsFeed,dashboardData.newsItems)||($scope.newsFeed=dashboardData.newsItems)}function fetchData(){return $http.get($rootScope._apiUrlBase+"v1/user/dashboard").then(function(data){localStorageService.set("dashboardData",data.data),setDashboardData(data.data)})}function init(){var data=localStorageService.get("dashboardData");data&&setDashboardData(data),fetchData()}$scope.racers=[],$scope.slides=[],$scope.newsFeed=[],$scope.earnPoints=function(){$rootScope._soundEffects.click.play(),$state.go("app.games")},$scope.setSlide=function($index){$rootScope._soundEffects.click.play(),$scope.slideIndex=$index},init()}),angular.module("view.feedback",["view.app"]).config(function($stateProvider){$stateProvider.state("app.feedback",{url:"/feedback",views:{mainContent:{templateUrl:"views/feedback/template.html",controller:"feedbackController"}},data:{bodyClass:"feedback-state",title:"Feedback"}})}).controller("feedbackController",function($scope,$rootScope,$timeout,$http){var timeout=5e3;$rootScope._loading=!1,$scope.complete=!1,$scope.feedback={},$scope.sendFeedback=function(){$scope.complete=!0,$http.post($rootScope._apiUrlBase+"v1/contact/feedback",{version:$rootScope._version,feedback:$scope.feedback.comment}).then(function(data){$scope.feedback.comment="",$timeout(function(){$scope.complete=!1},timeout)},function(error){$scope.complete=!1})}}),angular.module("view.game",["ngAnimate"]).config(function($stateProvider){$stateProvider.state("app.game",{url:"/game/:gameId",views:{mainContent:{templateUrl:"views/game/template.html",controller:"gameController"}},data:{bodyClass:"game-state",title:"Play"},resolve:{gameData:function($rootScope,$http,$stateParams){return $rootScope._loading=!0,$http.get($rootScope._apiUrlBase+"v1/game/"+$stateParams.gameId).then(function(data){return data.data},function(error){$rootScope._loading=!1,$rootScope.goBack(),$rootScope._error=error})}}})}).controller("gameController",function($http,$scope,$rootScope,$state,gameData,$filter,ModalService){$rootScope._loading=!1,$rootScope._showMenuBtn=!1,$rootScope._showBackBtn=!0,$rootScope._stateTitle=gameData.title,$scope.gameData=gameData,$rootScope.calculateRewards=function(data,activity){var reward=0;if(null===activity.condition_value||"*"===activity.condition_value||activity.condition_value===data)if(activity.condition_reward_amount){var rwdAmt=JSON.parse(activity.condition_reward_amount);reward=rwdAmt[data]}else reward=activity.reward_amount;return parseFloat(reward)}}),angular.module("view.games",[]).config(function($stateProvider){$stateProvider.state("app.games",{url:"/games",views:{mainContent:{templateUrl:"views/games/template.html",controller:"gamesController"}},data:{bodyClass:"games-state",title:"Games"}})}).controller("gamesController",function($scope,$rootScope,$state,ModalService,localStorageService,$http){function loadData(){return $http.get($rootScope._apiUrlBase+"v2/games/available").then(function(data){localStorageService.set("gamesData",data.data),setData(data.data)},function(error){return error})}function setData(data){angular.equals($scope.games,data)||($scope.games=data)}function init(){var gamesData=localStorageService.get("gamesData");gamesData&&($scope.games=gamesData),loadData()}$scope.playGame=function(game){game.availableAt?($rootScope._soundEffects.error.play(),$rootScope.modalData={title:"Hang on there",message:"You've play all you can for now. You can play again ",availableAt:game.availableAt},ModalService.showModal({templateUrl:"views/modals/cant_play_yet.html",controller:"modalGameComplete"}).then(function(modal){modal.element.modal({backdrop:"static",keyboard:!1})})):($rootScope._soundEffects.gameOpen.play(),$state.go("app.game",{gameId:game.id}))},init()}),angular.module("view.leaderBoard",[]).config(function($stateProvider){$stateProvider.state("app.leaderBoard",{url:"/leader_board",views:{mainContent:{templateUrl:"views/leaderboard/template.html",controller:"leaderBoardController"}},data:{bodyClass:"leaderboard-state",title:"Leader Board"}})}).controller("leaderBoardController",function($scope,$rootScope,$http,localStorageService){function loadLeaders(){$scope.loading=!0,$http.get($rootScope._apiUrlBase+$scope.boards[$scope.activeBoard].endpoint).then(function(data){$scope.loading=!1,localStorageService.set("leaderBoardData",data.data),setData(data.data)},function(error){$scope.loading=!1,$rootScope._error=error})}function setData(data){$scope.myRank=data.myRank,angular.equals($scope.leaders,data.leaders)||($scope.leaders=data.leaders),$scope.group=data.group}function init(){var data=localStorageService.get("leaderBoardData");data&&setData(data),loadLeaders()}$scope.boards=[{name:"Dealership",endpoint:"v1/leaderboard/group"},{name:"Region",endpoint:"v1/leaderboard/region"},{name:"National",endpoint:"v1/leaderboard/national"}],$scope.activeBoard=0,$scope.selectBoard=function(index){$rootScope._soundEffects.click.play(),$scope.activeBoard=index},$scope.$watch("activeBoard",function(nv,ov){angular.equals(nv,ov)||loadLeaders()}),init()}),angular.module("view.login",["service.auth"]).config(function($stateProvider){$stateProvider.state("login",{url:"/login",templateUrl:"views/login/template.html",controller:"loginController",data:{bodyClass:"login-state"},resolve:{userState:function(localStorageService,$rootScope){return $rootScope._loading=!0,localStorageService.get("userInfo")}}}).state("logout",{url:"/logout",controller:function(authService,$state){authService.logout().then(function(){$state.go("login")})}})}).controller("loginController",function(authService,$rootScope,$scope,$state,localStorageService,$http,userState){$rootScope._loading=!1;var loginRedirectState="app.dashboard";userState&&$state.go(loginRedirectState),$scope.forgotPassword=!1,$scope.login=localStorageService.get("login")||{username:null,password:null,remember:!0},$scope.loginUser=function(){$rootScope._loginNotification=!1,$scope.forgotPassword&&$scope.login.username?($scope.loading=!0,$scope.error=null,authService.forgotPassword($scope.login.username).then(function(data){$scope.loading=!1,$scope.forgotPassword=!1,$scope.error="An email has been sent to you with password reset instructions."},function(data){$scope.loading=!1,$scope.error=data.data.error})):$scope.login.username&&$scope.login.password&&($scope.loading=!0,$scope.error=null,localStorageService.set("login",$scope.login),authService.login($scope.login.username,$scope.login.password).then(function(data){$state.go(loginRedirectState),$scope.loading=!1},function(data){$scope.loading=!1,data.data?"user not found"===data.data.error?$scope.error="No account exists for this email address. To create your account use the sign up link below.":$scope.error=data.data.error:$scope.error="Oops, something went wrong.",localStorageService.remove("login")}))},$scope.signUp=function(){$state.go("signUp")}}),angular.module("view.modal",[]).controller("modalGameComplete",function($rootScope,$scope,close,$state,$timeout){$scope.modalClass={entering:!0,leaving:!1},$timeout(function(){$scope.modalClass.entering=!1},$rootScope._animationTime),$scope.buttonAction=function(){$timeout(function(){$scope.modalClass.leaving=!0,
close("Success!",$rootScope._animationTime),angular.element(document.getElementsByTagName("body")).removeClass("modal-open"),$state.go("app."+$rootScope.modalData.button.state)},0)},$scope.gameAction=function(){"nextQuestion"===$rootScope.modalData.action?$rootScope.currentQuestion++:"backToGames"===$rootScope.modalData.action&&$state.go("app.games"),$scope.modalClass.leaving=!0,close("Success!",$rootScope._animationTime),angular.element(document.getElementsByTagName("body")).removeClass("modal-open")},$scope.close=function(){close("Success!",$rootScope._animationTime),angular.element(document.getElementsByTagName("body")).removeClass("modal-open")}}),angular.module("view.profile",[]).config(function($stateProvider){$stateProvider.state("app.profile",{url:"/profile/:profileId",views:{mainContent:{templateUrl:"views/profile/template.html",controller:"profileController"}},data:{bodyClass:"profile-state",title:"Profile"},resolve:{profileData:function($rootScope,$http,$stateParams){return $rootScope._loading=!0,$http.get($rootScope._apiUrlBase+"v1/user/profile/"+$stateParams.profileId).then(function(data){return data.data},function(error){return error})}}})}).controller("profileController",function($scope,$rootScope,profileData,$state){$rootScope._loading=!1,profileData.user.id===$rootScope.user.id&&($rootScope._headerBtn={title:"Dashboard",state:"app.settings",icon:"fa fa-gear",badgeCount:!1}),$scope.profileData=profileData}),angular.module("view.roadToSale",[]).config(function($stateProvider){$stateProvider.state("app.roadToSale",{url:"/road_to_sale",views:{mainContent:{templateUrl:"views/roadtosale/template.html",controller:"roadToSaleController"}},data:{bodyClass:"road-to-sale-state",title:"Road to Sale"}})}).controller("roadToSaleController",function($scope,$rootScope,$state,ModalService,localStorageService,$http){function setData(data){angular.equals($scope.games,data)||($scope.games=data)}function loadData(){$http.get($rootScope._apiUrlBase+"v2/games/road_to_sale").then(function(data){localStorageService.set("roadToSaleData",data.data),setData(data.data)},function(error){return error})}function init(){var roadToSaleData=localStorageService.get("roadToSaleData");roadToSaleData&&setData(roadToSaleData),loadData()}$scope.games=[],$scope.playGame=function(game){game.availableAt?($rootScope._soundEffects.error.play(),$rootScope.modalData={title:"Hang on there",message:"You've play all you can for now. You can play again ",availableAt:game.availableAt},ModalService.showModal({templateUrl:"views/modals/cant_play_yet.html",controller:"modalGameComplete"}).then(function(modal){modal.element.modal({backdrop:"static",keyboard:!1})})):($rootScope._soundEffects.gameOpen.play(),$state.go("app.game",{gameId:game.id}))},init()}),angular.module("view.settings",["view.app","ngFileUpload"]).config(function($stateProvider){$stateProvider.state("app.settings",{url:"/settings",views:{mainContent:{templateUrl:"views/settings/template.html",controller:"settingsController"}},data:{bodyClass:"settings-state",title:"Settings"}})}).controller("settingsController",function($scope,$rootScope,Upload,userService,localStorageService,$timeout){function reloadAvatar(){$rootScope.avatarBackground={},userService.userInfo(!0).then(function(data){$rootScope.user=data,$rootScope.avatarBackground={"background-image":"url("+data.avatar.file_location+")"}})}function uploadAvatar(){$scope.progressIndicator={height:"100%"},$scope.progressComplete=!1;var token=localStorageService.get("token");Upload.upload({url:$rootScope._apiUrlBase+"v1/user/avatar",file:$scope.avatar,method:"POST",headers:{"x-auth-key":token}}).progress(function(evt){var progressPercentage=parseInt(100*evt.loaded/evt.total);$scope.progressIndicator.height=100-parseFloat(progressPercentage)+"%"}).success(function(data,status,headers,config){$rootScope._soundEffects.success.play(),$scope.progressComplete=!0,reloadAvatar(),$timeout(function(){$scope.progressComplete=!1},3e3)}).error(function(data,status,headers,config){})}$scope.avatar=$rootScope.user.avatar.file_location||"/assets/icons/Icon-60@3x.png",$scope.timeZones=["US/Alaska","US/Aleutian","US/Arizona","US/Central","US/East-Indiana","US/Eastern","US/Hawaii","US/Indiana-Starke","US/Michigan","US/Mountain","US/Pacific","US/Samoa"],$scope.updateProfile=function(){document.getElementById("name").focus(),$scope.loading=!0,userService.save().then(function(){$scope.loading=!1},function(){$scope.loading=!1})},$scope.$watch("avatar",function(nv,ov){nv&&!angular.equals(nv,ov)&&uploadAvatar()}),Upload.setDefaults({ngfMinSize:2e3,ngfMaxSize:5e6})}),angular.module("view.signUp",["service.auth"]).config(function($stateProvider){$stateProvider.state("signUp",{url:"/signup/:invitecode/:email",templateUrl:"views/signup/template.html",controller:"signUpController",data:{bodyClass:"login-state"},resolve:{groupData:function($http,$rootScope,$stateParams,$q){return $rootScope._loading=!0,$http.get($rootScope._apiUrlBase+"v1/signup/groups").then(function(data){if($stateParams.invitecode)for(var i in data.data)if(data.data[i].invitation_code===$stateParams.invitecode)return data.data[i];return data.data},function(error){return $rootScope._error=error,error})}}})}).controller("signUpController",function(authService,$rootScope,$scope,$state,localStorageService,$http,groupData,$stateParams){$rootScope._loading=!1,$scope.groups=[],$scope.signup={group_id:"",email:$stateParams.email||""},angular.isArray(groupData)?$scope.groups=groupData:($scope.group=groupData,$scope.signup.group_id=groupData.id),$scope.confirmPassword=function(){$scope.signup.password&&$scope.signup.password!==$scope.signup.password_confirm?$scope.passwordMismatch=!0:$scope.passwordMismatch=!1},$scope.signUpUser=function(){$rootScope._loading=!0,$scope.errors=!1,$http.post($rootScope._apiUrlBase+"v1/signup/user",$scope.signup).then(function(data){$rootScope._loading=!1,$rootScope._loginNotification="Your account has been successfully created.",$state.go("login")},function(data){$rootScope._loading=!1,$scope.errors=[],angular.forEach(data.data.errors,function(obj){$scope.errors.push(obj)})})}}),angular.module("directive.games.questionAnswer",[]).directive("gameQuestionAnswer",function(){return{restrict:"EA",replace:!0,templateUrl:"directives/games/questionanswer/template.html",controller:"gameQuestionAnswerController",scope:{gameData:"="}}}).controller("gameQuestionAnswerController",function($scope,$rootScope,$http,ModalService){function correctAnswer(){var question=$scope.currentActivity.questions[$rootScope.currentQuestion];for(var i in question.answers)if(question.answers[i].correct)return question.answers[i].label;return!1}var gameTimerTimeout,postData={activities:[],gameId:$scope.gameData.id};$rootScope.currentQuestion=0,$rootScope.gameTimer=$rootScope._gameTimerDefault,$rootScope.timerRunning=!0,$rootScope._bodyClass+=" question-answer-game",gameTimerTimeout||$rootScope.timerCountDown(),$rootScope.$watch("currentQuestion",function(nv,ov){angular.equals(nv,ov)||($rootScope.gameTimer=$rootScope._gameTimerDefault,$rootScope.timerRunning||($rootScope.timerRunning=!0,$rootScope.timerCountDown()))}),$scope.selectAnswer=function(parentIndex,index,value,playClick){playClick&&$rootScope._soundEffects.click.play(),$scope.currentActivity=$scope.gameData.activities[parentIndex],$scope.selectedAnswer=index,postData.activities[0]={id:$scope.currentActivity.id,questions:[{id:$scope.currentActivity.questions[$rootScope.currentQuestion].id,value:value}]},$rootScope.stopTimer(),$scope.submitAnswer()},$scope.submitAnswer=function(){var question=$scope.currentActivity.questions[$rootScope.currentQuestion];$rootScope.timerRunning=!1,$http.post($rootScope._apiUrlBase+"v1/game/play/"+$scope.gameData.id,postData),$rootScope.modalData={reward_amount:$scope.currentActivity.reward_amount,reward_type:$scope.currentActivity.reward_type,action:"nextQuestion",button:{text:"Continue",icon_class:"fa fa-angle-right float-right"}},question.answers[$scope.selectedAnswer]&&question.answers[$scope.selectedAnswer].correct?($rootScope._soundEffects.correct.play(),$rootScope.modalData.title="Correct!",$rootScope.modalData.message="Great job, keep up the good work."):($rootScope._soundEffects.incorrect.play(),$rootScope.modalData.title="Sorry, no.",$rootScope.modalData.message="The correct answer is, "+correctAnswer(),$rootScope.modalData.reward_amount=0,$rootScope.modalData.button.text="Try Another"),$rootScope.currentQuestion>=$scope.currentActivity.questions.length-1&&($rootScope.modalData.button.text="All Done",$rootScope.modalData.button.icon_class="",$rootScope.modalData.action="backToGames"),ModalService.showModal({templateUrl:"views/modals/question_complete.html",controller:"modalGameComplete"}).then(function(modal){modal.element.modal({backdrop:"static",keyboard:!1})}),$scope.selectedAnswer=null},$scope.$on("timerEnded",function(event,args){$scope.selectAnswer("0",-1,null,!1)}),$scope.$on("$destroy",function(){$rootScope.stopTimer(),$rootScope.gameTimer=$rootScope._gameTimerDefault})}),angular.module("directive.games.setAppointment",[]).directive("gameSetAppointment",function(){return{restrict:"EA",replace:!0,templateUrl:"directives/games/setappointment/template.html",controller:"gameSetAppointmentController",scope:{gameData:"="}}}).controller("gameSetAppointmentController",function($scope,$rootScope,$http,ModalService,$timeout,$state){function goBack(){var prevActivity=$scope.currentActivity-1;prevActivity>=0?($scope.stateClass="animate-back",$timeout(function(){$scope.currentActivity=$rootScope.currentActivity=$scope.currentActivity-1,init("animate-back-in")},$rootScope._animationTime)):$state.go("app.roadToSale")}function init(animateClass){$scope.stateClass=animateClass?animateClass:"animate-in",$scope.activity=$scope.gameData.activities[$scope.currentActivity]}function transitionToActivity(nextActivity){$scope.stateClass="animate-in",$scope.currentActivity=$rootScope.currentActivity=nextActivity,$scope.activity=$scope.gameData.activities[$scope.currentActivity]}({activities:[],gameId:$scope.gameData.id});$rootScope._bodyClass+=" set-appointment-game",$scope.formData={},$scope.totalRewards={},$scope.currentActivity=$rootScope.currentActivity=0,$scope.clearFocus=!1,$rootScope._backFunct=goBack,$scope.submitInfo=function(){if($scope.formData){$rootScope._loading=!0;var postData={gameId:$scope.gameData.id,activities:[]};angular.forEach($scope.formData,function(data,key){data&&postData.activities.push({id:$scope.gameData.activities[key].id,value:data})}),$http.post($rootScope._apiUrlBase+"v1/game/play/"+$scope.gameData.id,postData).then(function(data){$rootScope._loading=!1,"showModal"===data.data.action&&($rootScope.modalData=data.data.response,$rootScope.modalData.button.state="roadToSale",$rootScope._soundEffects.earnPoints.play(),ModalService.showModal({templateUrl:"views/modals/game_complete.html",controller:"modalGameComplete"}).then(function(modal){modal.element.modal({backdrop:"static",keyboard:!1})}))},function(error){$rootScope._loading=!1})}},$scope.setRadioValue=function(index,value){$rootScope._soundEffects.click.play(),$scope.formData[index]=value},$scope.rewardAmount=function($index){var activity=$scope.gameData.activities[$index];if(activity.condition_reward_amount){var conditionRewardAmount=angular.fromJson(activity.condition_reward_amount);if(conditionRewardAmount[$scope.formData[$index]])return conditionRewardAmount[$scope.formData[$index]]}return activity.reward_amount},$scope.$watch("formData",function(newFormData){var totalRewards={},showButton=!1;angular.forEach(newFormData,function(data,key){data&&(totalRewards[$scope.gameData.activities[key].reward_type]=parseFloat(totalRewards[$scope.gameData.activities[key].reward_type]||0)+$rootScope.calculateRewards(data,$scope.gameData.activities[key]),showButton=!0)}),$scope.totalRewards=totalRewards,$scope.showButton=showButton},!0),$scope.onDateSet=function(newDate,oldDate){$rootScope._soundEffects.click.play()},$scope.optionChanged=function(){$rootScope._soundEffects.click.play()},$scope.nextActivity=function(){$scope.clearFocus=!$scope.clearFocus;var curActivity=$scope.currentActivity,nextActivity=curActivity+1<$scope.gameData.activities.length?curActivity+1:curActivity;curActivity===nextActivity?$scope.submitInfo():($scope.stateClass="animate-out",$timeout(function(){transitionToActivity(nextActivity)},$rootScope._animationTime))},$scope.$on("destroy",function(){$rootScope._backFunct=void 0}),init()}),angular.module("directive.games.soldVehicle",[]).directive("gameSoldVehicle",function(){return{restrict:"EA",replace:!0,templateUrl:"directives/games/soldvehicle/template.html",controller:"gameSoldVehicleController",scope:{gameData:"="}}}).controller("gameSoldVehicleController",function($scope,$rootScope,$http,ModalService,$timeout,$state){function goBack(){var prevActivity=$scope.currentActivity-1;prevActivity>=0?($scope.stateClass="animate-back",$timeout(function(){$scope.currentActivity=$rootScope.currentActivity=$scope.currentActivity-1,init("animate-back-in")},$rootScope._animationTime)):$state.go("app.roadToSale")}function init(animateClass){$scope.stateClass=animateClass?animateClass:"animate-in",$scope.activity=$scope.gameData.activities[$scope.currentActivity],$scope.customers=$scope.activity.condition_param.split(",")}function transitionToActivity(nextActivity){$scope.currentActivity=$rootScope.currentActivity=nextActivity,init()}({activities:[],gameId:$scope.gameData.id});$rootScope._bodyClass+=" vehicle-sold-game",$scope.formData={},$scope.totalRewards={},$scope.clearFocus=!1,$scope.currentActivity=0,$rootScope._backFunct=goBack,$scope.submitInfo=function(){if($scope.formData){$rootScope._loading=!0;var postData={gameId:$scope.gameData.id,activities:[]};angular.forEach($scope.formData,function(data,key){data&&postData.activities.push({id:$scope.gameData.activities[key].id,value:data})}),$http.post($rootScope._apiUrlBase+"v1/game/play/"+$scope.gameData.id,postData).then(function(data){$rootScope._loading=!1,"showModal"===data.data.action&&($rootScope.modalData=data.data.response,$rootScope.modalData.button.state="roadToSale",$rootScope._soundEffects.earnPoints.play(),ModalService.showModal({templateUrl:"views/modals/game_complete.html",controller:"modalGameComplete"}).then(function(modal){modal.element.modal({backdrop:"static",keyboard:!1})}))},function(error){$rootScope._loading=!1})}},$scope.setRadioValue=function(index,value){$rootScope._soundEffects.click.play(),$scope.formData[index]=value},$scope.rewardAmount=function($index){var activity=$scope.gameData.activities[$index];if(activity.condition_reward_amount){var conditionRewardAmount=angular.fromJson(activity.condition_reward_amount);if(conditionRewardAmount[$scope.formData[$index]])return conditionRewardAmount[$scope.formData[$index]]}return activity.reward_amount},$scope.$watch("formData",function(newFormData,oldFormData){var totalRewards={},showButton=$scope.showButton;angular.forEach(newFormData,function(data,key){data&&(totalRewards[$scope.gameData.activities[key].reward_type]=parseFloat(totalRewards[$scope.gameData.activities[key].reward_type]||0)+$rootScope.calculateRewards(data,$scope.gameData.activities[key]),showButton=!0)}),$scope.totalRewards=totalRewards,$scope.showButton=showButton,angular.equals(newFormData,oldFormData)||$scope.nextActivity()},!0),$scope.onDateSet=function(newDate,oldDate){$rootScope._soundEffects.click.play()},$scope.optionChanged=function(){$rootScope._soundEffects.click.play()},$scope.nextActivity=function(){$scope.clearFocus=!$scope.clearFocus;var curActivity=$scope.currentActivity,nextActivity=curActivity+1<$scope.gameData.activities.length?curActivity+1:curActivity;curActivity===nextActivity?$scope.submitInfo():($scope.stateClass="animate-out",$timeout(function(){transitionToActivity(nextActivity)},$rootScope._animationTime))},$scope.$on("destroy",function(){$rootScope._backFunct=void 0}),init()}),angular.module("directive.games.testDrive",[]).directive("gameTestDrive",function(){return{restrict:"EA",replace:!0,templateUrl:"directives/games/testdrive/template.html",controller:"gameTestDriveController",scope:{gameData:"="}}}).controller("gameTestDriveController",function($scope,$rootScope,$http,ModalService,$timeout){function arrayUnique(a){return a?a.reduce(function(p,c){return p.indexOf(c)<0&&p.push(c),p},[]):void 0}function init(){$scope.stateClass="animate-in",$scope.activity=$scope.gameData.activities[$scope.currentActivity];var customers=$scope.activity.condition_param?$scope.activity.condition_param.split(","):null;$scope.customers=arrayUnique(customers)}function transitionToActivity(nextActivity){$scope.currentActivity=$rootScope.currentActivity=nextActivity,init()}({activities:[],gameId:$scope.gameData.id});$rootScope._bodyClass+=" test-drive-game",$scope.formData={},$scope.totalRewards={},$scope.clearFocus=!1,$scope.currentActivity=0,$scope.chooseCustomer=function(customer){$scope.formData[$scope.currentActivity]=customer},$scope.submitInfo=function(){if($scope.formData){$rootScope._loading=!0;var postData={gameId:$scope.gameData.id,activities:[]};angular.forEach($scope.formData,function(data,key){data&&postData.activities.push({id:$scope.gameData.activities[key].id,value:data})}),$http.post($rootScope._apiUrlBase+"v1/game/play/"+$scope.gameData.id,postData).then(function(data){$rootScope._loading=!1,"showModal"===data.data.action&&($rootScope.modalData=data.data.response,$rootScope.modalData.button.state="roadToSale",$rootScope._soundEffects.earnPoints.play(),ModalService.showModal({templateUrl:"views/modals/game_complete.html",controller:"modalGameComplete"}).then(function(modal){modal.element.modal({backdrop:"static",keyboard:!1})}))},function(error){$rootScope._loading=!1})}},$scope.setRadioValue=function(index,value){$rootScope._soundEffects.click.play(),$scope.formData[index]=value},$scope.showReward=function($index){return"radio"===$scope.gameData.activities[$index].activity_type?$scope.formData[$index]===$scope.gameData.activities[$index].condition_value?!0:!1:"select"===$scope.gameData.activities[$index].activity_type?!$scope.formData[$index]||"*"!==$scope.gameData.activities[$index].condition_value&&$scope.formData[$index]!==$scope.gameData.activities[$index].condition_value?!1:!0:$scope.formData[$index]?!0:void 0},$scope.rewardAmount=function($index){var activity=$scope.gameData.activities[$index];if(activity.condition_reward_amount){var conditionRewardAmount=angular.fromJson(activity.condition_reward_amount);if(conditionRewardAmount[$scope.formData[$index]])return conditionRewardAmount[$scope.formData[$index]]}return activity.reward_amount},$scope.$watch("formData",function(newFormData){var totalRewards={},showButton=!1;angular.forEach(newFormData,function(data,key){data&&(totalRewards[$scope.gameData.activities[key].reward_type]=parseFloat(totalRewards[$scope.gameData.activities[key].reward_type]||0)+$rootScope.calculateRewards(data,$scope.gameData.activities[key]),showButton=!0)}),$scope.totalRewards=totalRewards,$scope.showButton=showButton},!0),$scope.optionChanged=function(){$rootScope._soundEffects.click.play()},$scope.nextActivity=function(){$scope.clearFocus=!$scope.clearFocus;var curActivity=$scope.currentActivity,nextActivity=curActivity+1<$scope.gameData.activities.length?curActivity+1:curActivity;curActivity===nextActivity?$scope.submitInfo():($scope.stateClass="animate-out",$timeout(function(){transitionToActivity(nextActivity)},$rootScope._animationTime))},init()});